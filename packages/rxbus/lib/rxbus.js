var e,s=require("rxjs").Subject,n=(e=require("assert"))&&e.__esModule?e.default:e;let t;!function(e){class t{_channels=new Map;newChannel(e){n.ok(!this._channels.has(e),`Channel ${e} already exists!`);let t=new s;return this._channels.set(e,t),t}channel(e){return n.ok(this._channels.has(e),`Channel ${e} doesn't exists!`),this._channels.get(e).asObservable()}}class a{_modules=new Map;registerModule(e){n.ok(!this._modules.has(e.name),`Module ${e.name} already exists!`);let s={module:e,status:{started:!1,paused:!1}};this._modules.set(e.name,s)}start(){this._modules.forEach((e=>{e.status.started||(e.module.onStart&&e.module.onStart(),e.status.started=!0)}))}}e.Engine=class{channels=new t;modules=new a}}(t||(t={}));const a=new t.Engine;exports.Bus=a,exports.NewChannel=function(e,n,t){const a=`_${n}`;Object.defineProperty(e,`_${n}`,{writable:!1,value:new s}),t.get=()=>e[a]},exports.OnChannel=function(e){return(s,n,t)=>{a.channel(e).subscribe({next:t.value}),console.log(s,n,t)}};
//# sourceMappingURL=rxbus.js.map
